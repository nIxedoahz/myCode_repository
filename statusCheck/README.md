---
date: 2017-01-23 11:30:04 <br>
author: wuzy
---

# build
make at the top level

    make
在 bin 目录中将会生成 downcheck 可执行程序，启动程序

    ./downcheck
程序为守护进程模式，在后台执行。在 config 中可以修改配置参数    

# 新修改　20180307
1. 新增 VID 和 VLTE 字段
2. 修复解码模块，继承导致的内存泄漏问题，因为基类中有虚函数时，如果使用基类指向派生类对象，在释放时，基类的析构函数
要定义为虚函数才能完全释放，否则只会释放派生类，不会调用基类的析构函数，导致释放不完全
3. 修改活跃用户数统计的定义，活跃用户数定义与集团经分对活跃用户数的定义保持一致。

# 20180308
1. 添加VLTE字段，测试正常

# 20180309
1. 添加一个测试功能，能够将话单记录全部解码并输出，加一个参数选项
2. 修改活跃用户数统计的定义

> 为方便统计并与一经统计逻辑保持一致，现定义活跃用户数统计逻辑如下：
> 统计周期内，产生语音话单，主叫短信话单，主叫彩信话单，和流量话单
> 的中国移动转售用户(停机后异常话单可排除)

# 20180312
1. 单元测试，测试活跃用户数统计功能
2. 增加日志输出，当解码失败时，会将结果输出到日志文件中
3. 修改 downcheck.1 帮助文档

# 20180313
1. 使用 valgrind 检测内存泄漏问题，解决问题
2. 优化 redis 查询之前的 mysql 查询语句，这个语句太耗费时间，必须优化
